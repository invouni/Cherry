<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style type="text/css" media="all">
    input,
    select,
    option {
      outline: 0;
    }
  </style>
</head>

<body class="bg-gray-100 min-h-screen flex  flex-col px-2 py-2">
  <h1 class="text-5xl mx-auto my-2">DashBoard</h1>
  <div class="bg-white shadow-lg rounded-2xl p-8 w-full flex-1">
    <h1 class="text-3xl font-bold mb-6 text-center">Select User Mode</h1>
    
    <div class="flex justify-center space-x-6 mb-6">
      <label class="flex items-center space-x-2">
        <input type="radio" name="userType" value="student" id="studentRadio">
        <span>Student</span>
      </label>
      <label class="flex items-center space-x-2">
        <input type="radio" name="userType" value="teacher" id="teacherRadio">
        <span>Teacher</span>
      </label>
    </div>
    
    <!-- Student dropdown -->
    <div id="studentSelect" class="hidden mb-4">
      <label class="block mb-1 font-medium">Select Class</label>
      <select id="classSelect" class="w-full border rounded p-2">
        <option value="">-- Choose Class --</option>
        <option value="6A">6A</option>
        <option value="7A">7A</option>
        <option value="8B">8B</option>
      </select>
    </div>
    
    <!-- Teacher dropdown -->
    <div id="teacherSelect" class="hidden mb-4">
      <label class="block mb-1 font-medium">Select Teacher</label>
      <select id="teacherName" class="w-full border rounded p-2">
        <option value="">-- Choose Teacher --</option>
        <option value="Mr. Sharma">Mr. Sharma</option>
        <option value="Ms. Pooja">Ms. Pooja</option>
        <option value="Mrs. Singh">Mrs. Singh</option>
      </select>
    </div>
    
    <button id="continueBtn" class="w-full bg-blue-600 text-white p-2 rounded disabled:bg-gray-400" disabled>
      Continue
    </button>
    <!--Design Timetable-->
    <h1 class="w-full h-auto my-2 px-auto  text-center text-3xl">Time Table</h1>
    <div class="grid grid-cols-6 gap-1 w-full">
      
      <!-- Header -->
      <div class="font-semibold text-center p-2 border">Time</div>
      <div class="font-semibold text-center p-2 border">Mon</div>
      <div class="font-semibold text-center p-2 border">Tue</div>
      <div class="font-semibold text-center p-2 border">Wed</div>
      <div class="font-semibold text-center p-2 border">Thu</div>
      <div class="font-semibold text-center p-2 border">Fri</div>
      
      <!-- Rows -->
      <!-- Repeat this block for each period -->
      <div class="p-2 border text-center">9:00</div>
      <div class="p-2 border text-center"></div>
      <div class="p-2 border text-center"></div>
      <div class="p-2 border text-center"></div>
      <div class="p-2 border text-center"></div>
      <div class="p-2 border text-center"></div>
      
      <div class="p-2 border text-center">10:00</div>
      <div class="p-2 border text-center"></div>
      <div class="p-2 border text-center"></div>
      <div class="p-2 border text-center"></div>
      <div class="p-2 border text-center"></div>
      <div class="p-2 border text-center"></div>
      
      <div class="p-2 border text-center">11:00</div>
      <div class="p-2 border text-center"></div>
      <div class="p-2 border text-center"></div>
      <div class="p-2 border text-center"></div>
      <div class="p-2 border text-center"></div>
      <div class="p-2 border text-center"></div>
    </div>
    <div class="link w-full h-auto px-2 my-4 flex items-center justify-center">
      <a href="/ai/cherry"><button type="submit" class="bg-black px-5 py-2 rounded-md text-white hover:opacity-[0.8]">Lets Chat with Cherry </button></a>
    </div>
  </div>
  
  <script>
    const studentRadio = document.getElementById('studentRadio');
    const teacherRadio = document.getElementById('teacherRadio');
    const studentSelect = document.getElementById('studentSelect');
    const teacherSelect = document.getElementById('teacherSelect');
    const continueBtn = document.getElementById('continueBtn');
    
    const classSelect = document.getElementById('classSelect');
    const teacherName = document.getElementById('teacherName');
    
    // Restore last selection if exists
    const savedUserType = localStorage.getItem('userType');
    const savedClass = localStorage.getItem('class');
    const savedTeacher = localStorage.getItem('teacher');
    
    if (savedUserType) {
      if (savedUserType === 'student') {
        studentRadio.checked = true;
        studentSelect.classList.remove('hidden');
        if (savedClass) classSelect.value = savedClass;
      } else {
        teacherRadio.checked = true;
        teacherSelect.classList.remove('hidden');
        if (savedTeacher) teacherName.value = savedTeacher;
      }
      checkContinueState();
    }
    
    studentRadio.addEventListener('change', () => {
      studentSelect.classList.remove('hidden');
      teacherSelect.classList.add('hidden');
      localStorage.setItem('userType', 'student')
      teacherName.value = "";
      checkContinueState();
    });
    
    teacherRadio.addEventListener('change', () => {
      teacherSelect.classList.remove('hidden');
      studentSelect.classList.add('hidden');
      classSelect.value = "";
      localStorage.setItem('userType', 'teacher')
      checkContinueState();
    });
    
    classSelect.addEventListener('change', checkContinueState);
    teacherName.addEventListener('change', checkContinueState);
    
    function checkContinueState() {
      if (
        (studentRadio.checked && classSelect.value) ||
        (teacherRadio.checked && teacherName.value)
      ) {
        continueBtn.disabled = false;
      } else {
        continueBtn.disabled = true;
      }
    }
    
    continueBtn.addEventListener('click', () => {
      let data = {};
      
      if (studentRadio.checked) {
        data = { type: 'student', class: classSelect.value };
        localStorage.setItem('userType', 'student');
        localStorage.setItem('class', classSelect.value);
        localStorage.removeItem('teacher');
      } else {
        data = { type: 'teacher', teacher: teacherName.value };
        localStorage.setItem('userType', 'teacher');
        localStorage.setItem('teacher', teacherName.value);
        localStorage.removeItem('class');
      }
      
      // Navigate to next page (weâ€™ll connect backend route next)
      window.location.href = `/voicebot?type=${data.type}&value=${data.class || data.teacher}`;
    });
  </script>
  
</body>

</html>